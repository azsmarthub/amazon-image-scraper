<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="container">
        <div class="header-section">
            <h1>Amazon Image Scraper</h1>
            <button id="darkModeToggle" class="dark-mode-toggle" title="Toggle Dark Mode">üåô</button>
        </div>
        
        <div class="input-section">
            <label for="asinInput">Enter ASINs (one per line):</label>
            <textarea 
                id="asinInput" 
                placeholder="B07GV2S1GS&#10;B08N5WRWNB&#10;B09JQL3NWT"
                rows="5"
            ></textarea>
        </div>

        <div class="settings-section">
            <label for="zipCode">Delivery ZIP Code:</label>
            <input type="text" id="zipCode" value="10016" placeholder="10016">
            
            <label for="delayTime">Delay between tabs (ms):</label>
            <input type="number" id="delayTime" value="3000" min="1000" max="10000" step="500">
        </div>

        <div class="webhook-section">
            <label for="webhookUrl">n8n Webhook URL:</label>
            <input 
                type="url" 
                id="webhookUrl" 
                placeholder="https://your-n8n.com/webhook/amazon-images"
            >
            <div id="webhookStatus" class="webhook-status" style="display: none;">
                <span class="webhook-indicator"></span>
                <span class="webhook-text"></span>
            </div>
        </div>

        <div class="button-section">
            <button id="startBtn" class="primary-btn">Start Scraping</button>
            <button id="stopBtn" class="secondary-btn" disabled>Stop</button>
        </div>

        <div id="status" class="status-section">
            <h3>Status:</h3>
            <p id="statusText">Ready to start...</p>
            <div id="progressBar" class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
        </div>

        <div id="advancedControls" class="advanced-controls">
            <div class="control-group">
                <button id="exportBtn" class="secondary-btn small-btn" disabled>
                    üì• Export Results
                </button>
                <select id="exportFormat" class="export-format">
                    <option value="csv">CSV</option>
                    <option value="json">JSON</option>
                </select>
            </div>
            <div class="control-group">
                <button id="clearHistoryBtn" class="secondary-btn small-btn">
                    üóëÔ∏è Clear History
                </button>
                <span id="processedCount" class="processed-count">0 ASINs processed</span>
            </div>
        </div>

        <div id="webhookFailures" class="webhook-failures" style="display: none;">
            <h3>Failed Webhooks:</h3>
            <div id="failedList" class="failed-list"></div>
            <button id="clearFailedBtn" class="secondary-btn small-btn">Clear All</button>
        </div>
    </div>

    <script src="../shared/constants.js"></script>
    <script src="../shared/utils.js"></script>
    <script src="popup.js"></script>
</body>
</html>
